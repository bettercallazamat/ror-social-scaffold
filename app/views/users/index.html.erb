<section class="users-section">
    <ul class="users-list">
        <% @users.each do |user| %>
        <li>
            Name: <%= link_to user.name,  user_path(user) %>

            <% if current_user.id != user.id %>
            <% if current_user.confirmed_friends.include?(user) %>
            <%= link_to 'Remove friend', unfriendship_path(user), method: :delete, id: 'unfriendship-link', class: 'profile-link' %>
            <% elsif current_user.pending_friends.include?(user) %>
            <span class = "profile-link">Invitation pending...</span>
            <% elsif current_user.friend_request?(user.id) %>
            <%= link_to "(Accept friendship request)", friendship_path(user.id), method: :put, id: 'accept-invitation-link', class: 'profile-link' %>
            <%= link_to "(Reject friendship request)", reject_friendship_path(user.id), method: :delete, id: 'reject-invitation-link', class: 'profile-link' %>
            <% else %>
            <%= link_to 'Send an invitation', new_friendship_path(user), method: :post, id: 'send-invitation-link', class: 'profile-link' %>
            <% end %>
            <% end %>


        </li>
        <% end %>
    </ul>
</section>